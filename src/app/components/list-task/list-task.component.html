<div class="container-fluid content">
  <h4 class="my-4">Listado de tareas</h4>

  <div class="row justify-content-center">
    <div class="col-md-11">
      <table class="table table-hover w-100 custom-table">
        <thead class="table-light">
          <tr>
            <th scope="col">Tarea</th>
            <th scope="col">Fecha LÃ­mite</th>
            <th scope="col">Personas Asignadas</th>
            <th scope="col">Completada</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="tasks.length > 0; else emptyTable;">
            <tr *ngFor="let task of tasks; let i = index">
              <td [ngClass]="{'custom-row': i % 2 === 0}">{{task.taskName}}</td>
              <td [ngClass]="{'custom-row': i % 2 === 0}">{{task.taskDate}}</td>
              <td [ngClass]="{'custom-row': i % 2 === 0}">
                <div class="container-fluid" *ngFor="let person of task.people; let j = index">
                  <strong>Nombre: </strong> {{person.name}}, <br>
                  <strong>Edad: </strong> {{person.age}}, <br>
                  <strong>Habilidades: </strong>
                  <span *ngFor="let skill of person.skills; let i = index">{{skill.nameSkill}}
                    <span *ngIf="i !== person.skills.length - 1">, </span>
                  </span>
                  <hr *ngIf="j !== task.people.length - 1">
                </div>
              </td>
              <td [ngClass]="{'custom-row': i % 2 === 0}">
                <div class="form-check d-flex justify-content-center">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="task.completed"
                    (change)="onCheckboxChange($event, task)">
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #emptyTable>
  <tr class="text-center">
    <td colspan="4">No hay tareas</td>
  </tr>
</ng-template>
